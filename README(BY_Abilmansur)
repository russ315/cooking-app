# Cooking App - User Profile Management API

**Assignment 4 - Milestone 2**  
**Author:** Abilmansur

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. User Profile Management API (–≤–∞—à–∞ —á–∞—Å—Ç—å)
- `GET /api/profile/{id}` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `PUT /api/profile/{id}` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `DELETE /api/profile/{id}` - —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `GET /api/profiles` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π
- `POST /api/profile` - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### 2. Assignment 4 Requirements
‚úÖ **Backend:** 5 endpoints + health check  
‚úÖ **Data Model:** User struct (in-memory, –ë–ï–ó –ë–î)  
‚úÖ **Concurrency:** Goroutine –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ **Thread-safe:** Mutex (sync.RWMutex) –≤ repository  
‚úÖ **Channels:** Event channel –≤ logger  

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod download

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
go run cmd/app/main.go
```

## üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Health check
```bash
curl http://localhost:8080/health
```

### –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
```bash
curl http://localhost:8080/api/profile/1
```

### –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
```bash
curl -X PUT http://localhost:8080/api/profile/1 \
  -H "Content-Type: application/json" \
  -d '{"first_name":"John","last_name":"Updated","bio":"New bio"}'
```

### –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
```bash
curl -X POST http://localhost:8080/api/profile \
  -H "Content-Type: application/json" \
  -d '{"username":"jane","email":"jane@example.com","first_name":"Jane","last_name":"Doe"}'
```

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
```bash
curl http://localhost:8080/api/profiles
```

## üéØ Assignment 4 Compliance

| Requirement | Implementation |
|------------|----------------|
| HTTP Server | ‚úÖ net/http + gorilla/mux |
| 3+ endpoints | ‚úÖ 5 endpoints |
| JSON I/O | ‚úÖ All endpoints |
| Data Model | ‚úÖ User struct |
| CRUD | ‚úÖ Create, Read, Update, Delete |
| Goroutine | ‚úÖ Activity logger goroutine |
| Channels | ‚úÖ Event channel |
| Thread-safe | ‚úÖ sync.RWMutex |

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
cooking-app/
‚îú‚îÄ‚îÄ cmd/app/
‚îÇ   ‚îî‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.go          # –ú–æ–¥–µ–ª—å User
‚îÇ   ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_repository.go  # In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Å mutex)
‚îÇ   ‚îú‚îÄ‚îÄ handler/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_handler.go  # HTTP handlers
‚îÇ   ‚îî‚îÄ‚îÄ logger/
‚îÇ       ‚îî‚îÄ‚îÄ activity_logger.go  # Goroutine + channels
‚îî‚îÄ‚îÄ go.mod
```

## üîç –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã

**–ü–æ–∫–∞–∂–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö —Ä–∞–±–æ—Ç—É goroutine:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –°–¥–µ–ª–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å: `curl http://localhost:8080/api/profile/1`
3. –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ:
   ```
   üöÄ Activity logger goroutine started
   [LOG] 14:30:15 | User ID: 1 | Action: profile_viewed
   ```

**Thread-safety:**
- –ü–æ–∫–∞–∂–∏—Ç–µ `sync.RWMutex` –≤ `internal/repository/user_repository.go`
- –û–±—ä—è—Å–Ω–∏—Ç–µ: "RLock –¥–ª—è —á—Ç–µ–Ω–∏—è, Lock –¥–ª—è –∑–∞–ø–∏—Å–∏"

**Channels:**
- –ü–æ–∫–∞–∂–∏—Ç–µ `events chan Event` –≤ `internal/logger/activity_logger.go`
- –û–±—ä—è—Å–Ω–∏—Ç–µ: "Buffered channel –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–±—ã—Ç–∏–π"

## üìã Git Commits (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)

**Commit 1:**
```bash
git add cmd/ internal/models/ internal/repository/ internal/handler/
git commit -m "feat(profile): Add User Profile Management API

- Implement User model
- Add in-memory repository with CRUD operations
- Create HTTP handlers for profile endpoints
- Support JSON input/output

Developed by: Abilmansur"
```

**Commit 2:**
```bash
git add internal/logger/
git commit -m "feat(profile): Add concurrency with goroutine and channels

- Implement activity logger with goroutine
- Use buffered channel for async event processing
- Add thread-safe access with sync.RWMutex

Satisfies Assignment 4 concurrency requirements.

Developed by: Abilmansur"
```

